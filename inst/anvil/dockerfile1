FROM us.gcr.io/anvil-gcr-public/anvil-rstudio-bioconductor:0.0.9

# This is to avoid the error
# 'debconf: unable to initialize frontend: Dialog'
ENV DEBIAN_FRONTEND noninteractive

RUN apt-get -y update ; \
    apt-get -y install libharfbuzz-dev libfribidi-dev ; 


RUN Rscript -e 'BiocManager::install(c("Rsamtools", "Biostrings", "XVector", "SummarizedExperiment", "GenomicRanges", "GenomeInfoDb", "IRanges", "S4Vectors", "MatrixGenerics", "matrixStats", "Biobase", "BiocGenerics", "rmarkdown", "httr", "bit64", "assertthat", "askpass", "BiocFileCache", "blob", "BSgenome", "GenomeInfoDbData", "progress", "pillar", "RSQLite", "lattice", "glue", "digest", "colorspace", "htmltools", "plyr", "XML", "pkgconfig", "biomaRt", "zlibbioc", "purrr", "scales", "BiocParallel", "tibble", "openssl", "generics", "ggplot2", "ellipsis", "GenomicFeatures", "magrittr", "crayon", "memoise", "evaluate", "xml2", "prettyunits", "hms", "lifecycle", "stringr", "munsell", "DelayedArray", "AnnotationDbi", "rlang", "grid", "RCurl", "rappdirs", "startup", "bitops", "gtable", "DBI", "reshape", "curl", "R6", "GenomicAlignments", "knitr", "dplyr", "rtracklayer", "bit", "stringi", "Rcpp", "vctrs", "dbplyr", "tidyselect", "xfun", "jsonlite", "tinytex", "fansi", "cli", "cpp11", "textshaping", "systemfonts", "brio", "rprojroot", "ps", "processx", "diffobj", "rstudioapi", "pkgbuild", "waldo", "testthat", "withr", "bookdown", "ragg", "downlit", "BiocStyle", "pkgdown", "ggrepel", "iterators", "shape", "foreach", "RcppArmadillo", "conquer", "MatrixModels", "SparseM", "arrangements", "gmp", "DEoptimR", "diffobj", "rstudioapi", "pkgbuild", "rprojroot", "waldo", "ps", "processx", "jsonlite", "brio", "fansi", "cli", "testthat", "withr", "BH", "cpp11", "data.table", "crosstalk", "tidyr", "htmlwidgets", "tinytex", "glmnet", "rjson", "quantreg", "iterpc", "robustbase", "plotly", "nortest", "fansi", "diffobj", "cli", "ps", "processx", "withr", "rstudioapi", "rprojroot", "pkgbuild", "pcaPP", "mvtnorm", "DEoptimR", "rrcov", "inline", "robustbase", "leaps", "waldo", "jsonlite", "brio", "testthat", "BH", "BMA", "snpStats", "data.table", "cpp11", "tidyr", "RcppEigen", "statmod", "nloptr", "minqa", "rematch", "cellranger", "zip", "readr", "forcats", "openxlsx", "readxl", "haven", "sp", "backports", "numDeriv", "broom", "lme4", "tmvnsim", "CompQuadForm", "metafor", "rio", "maptools", "pbkrtest", "abind", "carData", "mnormt", "meta", "randomForest", "car", "psych", "reshape2", "cowplot", "gridExtra"), update=FALSE, ask=FALSE)'
