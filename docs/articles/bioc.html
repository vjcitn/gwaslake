<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>bioc_ogw: connecting MRCIEU R packages to Bioconductor • gwaslake</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/flatly/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="bioc_ogw: connecting MRCIEU R packages to Bioconductor">
<meta property="og:description" content="gwaslake">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">gwaslake</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.23</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../articles/gwaslake.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/bioc.html">bioc_ogw: connecting MRCIEU R packages to Bioconductor</a>
    </li>
    <li>
      <a href="../articles/ieu_cat.html">Combining Open GWAS and EBI GWAS catalog information</a>
    </li>
    <li>
      <a href="../articles/workshop.html">gwaslake workshop, Bioc 2021</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/vjcitn/gwaslake" class="external-link">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>bioc_ogw: connecting MRCIEU R packages to Bioconductor</h1>
                        <h4 data-toc-skip class="author">Vincent J. Carey, stvjc at channing.harvard.edu</h4>
            
            <h4 data-toc-skip class="date">August 09, 2022</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/vjcitn/gwaslake/blob/HEAD/vignettes/bioc.Rmd" class="external-link"><code>vignettes/bioc.Rmd</code></a></small>
      <div class="hidden name"><code>bioc.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>This vignette discusses processes that can be undertaken to bring MRCIEU packages into the Bioconductor ecosystem.</p>
</div>
<div class="section level2">
<h2 id="general-guidelines">General guidelines<a class="anchor" aria-label="anchor" href="#general-guidelines"></a>
</h2>
<p>The Bioconductor website pages for <a href="https://bioconductor.org/developers/package-submission/" class="external-link">package submission</a> provide full details.</p>
<div class="section level3">
<h3 id="initiate-the-submission-with-an-issue">Initiate the submission with an issue<a class="anchor" aria-label="anchor" href="#initiate-the-submission-with-an-issue"></a>
</h3>
<blockquote>
<p>Submit by opening a new issue in the <a href="https://github.com/Bioconductor/Contributions" class="external-link">Bioconductor Contributions</a> repository, following the guidelines of the <a href="https://github.com/Bioconductor/Contributions#table-of-contents" class="external-link">README.md</a> file. Assuming that your package is in a GitHub Repository and under the default branch, add the link to your repository to the issue you are opening. You cannot specify any alternative branches; the default branch is utilized. The default branch must contain only package code. Any files or directories for other applications (Github Actions, devtool, etc) should be in a different branch.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="follow-the-qcreview-process">Follow the QC/review process<a class="anchor" aria-label="anchor" href="#follow-the-qcreview-process"></a>
</h3>
<blockquote>
<p>The package will be submitted to the Bioconductor build system (BBS). The system will check out your package from GitHub. It will then run R CMD build to create a ‘tarball’ of your source code, vignettes, and man pages. It will run R CMD check on the tarball, to ensure that the package conforms to standard R programming best practices. Bioconductor has chosen to utilize a custom R CMD check environment; See R CMD check environment for more details. Finally, the build system will run BiocCheckGitClone() and BiocCheck() to ensure that the package conforms to Bioconductor BiocCheck standards. The system will perform these steps using the ‘devel’ version of Bioconductor, on three platforms (Linux, Mac OS X, and Windows). After these steps are complete, a link to a build report will be appended to the new package issue. Avoid surprises by running these checks on your own computer, under the ‘devel’ version of Bioconductor, before submitting your package.</p>
</blockquote>
</div>
</div>
<div class="section level2">
<h2 id="specifics">Specifics<a class="anchor" aria-label="anchor" href="#specifics"></a>
</h2>
<p>For submission to Bioconductor 3.14, it would be good to start a submission in September. We use R 4.1.1 with <code><a href="https://rdrr.io/pkg/BiocManager/man/version.html" class="external-link">BiocManager::version()</a></code> returning ‘3.14’ and BiocManager::valid() returning ‘TRUE’.</p>
<div class="section level3">
<h3 id="ieugwasr">
<code>ieugwasr</code><a class="anchor" aria-label="anchor" href="#ieugwasr"></a>
</h3>
<div class="section level4">
<h4 id="r-cmd-check">R CMD check<a class="anchor" aria-label="anchor" href="#r-cmd-check"></a>
</h4>
<p>R CMD check is clean.</p>
</div>
<div class="section level4">
<h4 id="bioccheck">BiocCheck<a class="anchor" aria-label="anchor" href="#bioccheck"></a>
</h4>
<p>As of Sept 18, there is a bug in BiocCheck, a key QC component for the submission process. For now I am using the vjcitn-patch-1 branch of BiocCheck at github.com/vjcitn/BiocCheck.</p>
<ul>
<li>DESCRIPTION file must contain field biocViews: and have an entry such as Genetics.</li>
<li>Vignette code chunks should illustrate package activity. Since the most important tasks involve queries to the OpenGWAS server we need to decide whether these are very likely to succeed whenever build system checks package, or are too risky, in which case “mock” outputs of the server are stored in the package for testing.</li>
</ul>
<p>My sense is that the server is reliable enough to use directly in the vignette. Thus this WARNING should be solved, and the following NOTE:</p>
<pre><code>    * WARNING: Evaluate more vignette chunks.
        # of code chunks: 40
        # of eval=FALSE: 0
        # of nonexecutable code chunks by syntax: 29
        # total unevaluated 29 (72%)
    * NOTE: 'sessionInfo' not found in vignette(s)
      Missing from file(s):
        vignettes/guide.Rmd
        vignettes/local_ld.Rmd
        vignettes/timings.Rmd</code></pre>
<ul>
<li>It is good form to solve:</li>
</ul>
<pre><code>* Checking coding practice...
    * NOTE: Avoid sapply(); use vapply()
      Found in files:
        afl2.r (line 88, column 16)
        query.R (line 188, column 9)
    * NOTE: Avoid 1:...; use seq_len() or seq_along()
      Found in files:
        backwards.R (line 16, column 18)
        ld_clump.R (line 58, column 18)
        ld_clump.R (line 154, column 27)
        ld_clump.R (line 155, column 19)
        variants.R (line 17, column 18)
        zzz.R (line 20, column 41)
    * NOTE: Avoid redundant 'stop' and 'warn*' in signal conditions
      Found in files:
        /Users/vincentcarey/MRCIEU/ieugwasr/R/query.R (line 87, column
      25)
        /Users/vincentcarey/MRCIEU/ieugwasr/R/query.R (line 88, column
      25)
        /Users/vincentcarey/MRCIEU/ieugwasr/R/query.R (line 95, column
      30)
        /Users/vincentcarey/MRCIEU/ieugwasr/R/query.R (line 97, column
      30)
    * WARNING: Avoid T/F variables; If logical, use TRUE/FALSE (found 8
      times)
        T in R/ld_clump.R (line 130, column 101)
        T in R/ld_clump.R (line 142, column 65)
        F in R/ld_clump.R (line 130, column 88)
        F in R/ld_clump.R (line 130, column 110)
        F in R/ld_matrix.R (line 82, column 62)
        F in R/ld_matrix.R (line 82, column 75)
        F in R/ld_matrix.R (line 82, column 84)
        T in R/zzz.R (line 20, column 79)
    * WARNING: Avoid class membership checks with class() / is() and ==
      / !=; Use is(x, 'class') for S4 classes
      Found in files:
        afl2.r (line 38, column 23)
        afl2.r (line 58, column 23)
        query.R (line 231, column 23)
        query.R (line 298, column 23)
        query.R (line 351, column 23)
        variants.R (line 21, column 29)</code></pre>
<ul>
<li>This might indicate a value to consolidating some of the man pages for related functions:</li>
</ul>
<pre><code>* Checking man page documentation...
    * WARNING: Add non-empty \value sections to the following man
      pages: man/ld_clump_api.Rd, man/logging_info.Rd, man/pipe.Rd,
      man/revoke_access_token.Rd, man/select_api.Rd
    * ERROR: At least 80% of man pages documenting exported objects
      must have runnable examples. The following pages do not:
      afl2_chrpos.Rd, afl2_list.Rd, afl2_rsid.Rd, api_query.Rd,
  api_status.Rd, associations.Rd, batch_from_id.Rd, batches.Rd,
  check_access_token.Rd, cor.Rd, editcheck.Rd, fill_n.Rd,
  get_access_token.Rd, get_query_content.Rd, gwasinfo.Rd,
  infer_ancestry.Rd, ld_clump_local.Rd, ld_clump.Rd,
  ld_matrix_local.Rd, ld_matrix.Rd, ld_reflookup.Rd, legacy_ids.Rd,
  logging_info.Rd, phewas.Rd, pipe.Rd, revoke_access_token.Rd,
  select_api.Rd, tophits.Rd, variants_chrpos.Rd, variants_gene.Rd,
  variants_rsid.Rd, variants_to_rsid.Rd</code></pre>
<ul>
<li>The guidelines should indicate how to solve</li>
</ul>
<pre><code>* Checking for support site registration...
    Maintainer is registered at support site.
    * ERROR: Maintainer must add package name to Watched Tags on the
      support site; Edit your Support Site User Profile to add Watched
      Tags.


Summary:
ERROR count: 3
WARNING count: 6
NOTE count: 12
For detailed information about these checks, see the BiocCheck
vignette, available at
https://bioconductor.org/packages/3.14/bioc/vignettes/BiocCheck/inst/doc/BiocCheck.html#interpreting-bioccheck-output
BiocCheck FAILED.</code></pre>
</div>
</div>
<div class="section level3">
<h3 id="gwasvcf">gwasvcf<a class="anchor" aria-label="anchor" href="#gwasvcf"></a>
</h3>
<ul>
<li>R CMD check is not completely clean</li>
</ul>
<pre><code>* checking dependencies in R code ... WARNING
Namespaces in Imports field not imported from:
  ‘Rhtslib’ ‘coloc’ ‘jsonlite’ ‘methods’ ‘testthat’ ‘tidyr’
  All declared Imports should be used.</code></pre>
<ul>
<li>BiocCheck highlights</li>
</ul>
<pre><code>* Checking coding practice...
    * NOTE: Avoid sapply(); use vapply()
      Found in files:
        binaries.r (line 20, column 26)
        binaries.r (line 49, column 26)
        query.r (line 149, column 18)
        query.r (line 150, column 16)
        query.r (line 155, column 20)
        query.r (line 156, column 20)
    * NOTE: Avoid 1:...; use seq_len() or seq_along()
      Found in files:
        manipulate.r (line 98, column 26)
        manipulate.r (line 213, column 35)
        query.r (line 393, column 53)
    * WARNING: Avoid T/F variables; If logical, use TRUE/FALSE (found
      15 times)
        F in R/proxy.r (line 28, column 92)
        F in R/proxy.r (line 28, column 99)
        F in R/proxy.r (line 28, column 105)
        F in R/query.r (line 338, column 76)
        F in R/query.r (line 338, column 83)
        F in R/query.r (line 338, column 89)
        F in R/query.r (line 393, column 103)
        F in R/query.r (line 393, column 110)
        F in R/query.r (line 393, column 116)
        F in R/rsid_index.r (line 22, column 62)
        F in R/rsid_index.r (line 22, column 69)
        F in R/rsid_index.r (line 22, column 75)
        F in R/rsid_index.r (line 96, column 71)
        F in R/rsid_index.r (line 96, column 78)
        F in R/rsid_index.r (line 96, column 84)
    * WARNING: Avoid class membership checks with class() / is() and ==
      / !=; Use is(x, 'class') for S4 classes
      Found in files:
        manipulate.r (line 225, column 37)
    * ERROR: Avoid references to external hosting platforms
      Found in files:
        binaries.r (line 78, column 30)
        binaries.r (line 105, column 30)</code></pre>
<pre><code>* Checking man page documentation...
    * WARNING: Add non-empty \value sections to the following man
      pages: man/create_ldref_sqlite.Rd,
      man/create_rsidx_index_from_vcf.Rd, man/pipe.Rd
    * ERROR: At least 80% of man pages documenting exported objects
      must have runnable examples. The following pages do not:
      check_bcftools.Rd, check_plink.Rd, create_ldref_sqlite.Rd,
  create_rsidx_index_from_vcf.Rd, create_rsidx_sub_index.Rd,
  create_vcf.Rd, get_ld_proxies.Rd, merge_vcf.Rd, parse_chrompos.Rd,
  pipe.Rd, proxy_match.Rd, query_chrompos_bcftools.Rd,
  query_chrompos_file.Rd, query_chrompos_vcf.Rd, query_gwas.Rd,
  query_pval_bcftools.Rd, query_pval_file.Rd, query_pval_vcf.Rd,
  query_rsid_bcftools.Rd, query_rsid_file.Rd, query_rsid_rsidx.Rd,
  query_rsid_vcf.Rd, query_rsidx.Rd, set_bcftools.Rd, set_plink.Rd,
  sqlite_ld_proxies.Rd, vcf_to_granges.Rd, vcf_to_tibble.Rd,
  vcflist_overlaps.Rd
* Checking package NEWS...
    * NOTE: Consider adding a NEWS file, so your package news will be
      included in Bioconductor release announcements.</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Vince Carey.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.6.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
